## SENSORS / TEMPLATES / MAIN BEDROOM

# -- xiaomi mi flora --
# soil moisture
- name: 'Plnt Zamioculcas Zamiifolia Soil'
  unique_id: plnt_zamioculcas_zamiifolia_soil
  state: >
    {% if state_attr('plant.main_bedroom_zamioculcas_zamiifolia', 'problem') | regex_search('moisture low', ignorecase=True) %}
      {# report the moisture unit difference - #}
      {% if is_number(state_attr('plant.main_bedroom_zamioculcas_zamiifolia', 'moisture') | int) %}
        {% set offset = "%-g" | format(((state_attr('plant.main_bedroom_zamioculcas_zamiifolia', 'moisture') - 15 | int))) %}
        Soil Moisture Low ({{ offset }})
      {% else %}
        Soil Moisture Low
      {% endif %}
    {% elif state_attr('plant.main_bedroom_zamioculcas_zamiifolia', 'problem') | regex_search('moisture high', ignorecase=True) %}
      {# report the moisture unit difference + #}
      {% if is_number(state_attr('plant.main_bedroom_zamioculcas_zamiifolia', 'moisture') | int) %}
        {% set offset = "%+g" | format(((state_attr('plant.main_bedroom_zamioculcas_zamiifolia', 'moisture') | int) - 60)) %}
        Soil Moisture High ({{ offset }})
      {% else %}
        Soil Moisture High
      {% endif %}
    {% else %}
      Normal
    {% endif %}
