## SENSORS / TEMPLATES / SHED

# -- mopeka --
# convert mm to %
- name: 'SNR Shed BBQ Propane Tank Level Percent'
  unit_of_measurement: '%'
  state: >
    {% if is_number(states('sensor.snr_shed_bbq_propane_tank_level_mm')) %}
      {# manually calculated full tank capacity for 20lb propane #}
      {{ (states('sensor.snr_shed_bbq_propane_tank_level_mm') | float / 254 * 100) | round(0) }}
    {% else %}
      {# non-numeric value, return previous reading for now #}
      {{ states('sensor.snr_shed_bbq_propane_tank_level_percent') }}
    {% endif %}
