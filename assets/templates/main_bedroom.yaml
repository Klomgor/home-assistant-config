## TEMPLATES / MAIN BEDROOM

# -- binary sensors --
- binary_sensor:
    # -- sonoff --
    # heater running (via plug)
    - name: 'Main Bedroom Heating State'
      icon: 'mdi:radiator'
      # power reported in watts
      state: >
        {% if is_number(states('sensor.main_bedroom_heater_plug_energy_power')) %}
          {{ (states('sensor.main_bedroom_heater_plug_energy_power') | int(default=0)) > 10 }}
        {% endif %}


# --- sensors ---
- sensor:
  # -- xiaomi aqara --
  # temperature
  - name: 'Main Bedroom Temperature 1 Decimal'
    device_class: temperature
    unit_of_measurement: 'Â°C'
    state: >
      {% if is_number(state_attr('sensor.snr_mainbedroomclimate_temperature', 'temperature')) %}
        {{ state_attr('sensor.snr_mainbedroomclimate_temperature', 'temperature') | round(1, default=20.0) }}
      {% else %}
        {# use previous value if sensor returns unknown #}
        {{ states('sensor.main_bedroom_temperature_1_decimal') }}
      {% endif %}