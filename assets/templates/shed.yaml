## TEMPLATES / SHED

# -- binary sensors --
- binary_sensor:
  # -- la crosse (rtl) --
  # temperature battery state
  - name: 'SNR Shed Temperature Battery Low'
    state: >
      {# battery_ok: 1=normal, 0=low #}
      {% if is_number(state_attr('sensor.snr_shed_temperature', 'battery_ok')) %}
        {{ is_state_attr('sensor.snr_shed_temperature', 'battery_ok', 0) }}
      {% endif %}


# --- sensors ---
- sensor:
  # -- xiaomi aqara --
  # humidity
  - name: 'Shed Humidity Rounded'
    device_class: humidity
    unit_of_measurement: '%'
    state: > 
      {% if is_number(state_attr('sensor.snr_shed_climate_humidity', 'humidity')) %}
        {{ state_attr('sensor.snr_shed_climate_humidity', 'humidity') | int }}
      {% else %}
        {# use previous value if sensor returns unknown #}
        {{ states('sensor.shed_humidity_rounded') }}
      {% endif %}