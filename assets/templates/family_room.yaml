## TEMPLATES / FAMILY ROOM

# --- sensors ---
- sensor:
  # -- xiaomi mi flora --
  # plant soil moisture
  - name: 'Plnt Parlor Palm Soil'
    state: >
      {% if state_attr('plant.family_room_parlor_palm', 'problem') | regex_search('moisture low', ignorecase=True) %}
        {# report the moisture unit difference - #}
        {% if is_number(state_attr('plant.family_room_parlor_palm', 'moisture') | int) %}
          {% set offset = "%-g" | format(((state_attr('plant.family_room_parlor_palm', 'moisture') - 15 | int))) %}
          Soil Moisture Low ({{ offset }})
        {% else %}
          Soil Moisture Low
        {% endif %}
      {% elif state_attr('plant.family_room_parlor_palm', 'problem') | regex_search('moisture high', ignorecase=True) %}
        {# report the moisture unit difference + #}
        {% if is_number(state_attr('plant.family_room_parlor_palm', 'moisture') | int) %}
          {% set offset = "%+g" | format(((state_attr('plant.family_room_parlor_palm', 'moisture') | int) - 60)) %}
          Soil Moisture High ({{ offset }})
        {% else %}
          Soil Moisture High
        {% endif %}
      {% else %}
        Normal
      {% endif %}
